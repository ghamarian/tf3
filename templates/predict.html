{% extends "base.html" %}
{% import 'bootstrap/wtf.html' as wtf %}
{% from '_render_field.html' import render_field, render_single_field %}

{% block scripts %}
    {{ super() }}
    {#    <script src="{{ url_for('.static', filename='jquery.dataTables.js') }}"></script>#}
    {#    <script src="{{ url_for('.static', filename='dataTables.select.js') }}"></script>#}
    <script type="text/javascript" src="https://cdn.datatables.net/v/dt/dt-1.10.16/sl-1.2.5/datatables.min.js"></script>

     <script type="text/javascript">
         var handle_key = {};
         handle_key.features = {{ features | tojson | safe }};
         handle_key.types = {{ types | tojson | safe }};
         handle_key.categoricals = {{ categoricals | tojson | safe }};

           $.each( handle_key.features, function( key, value ) {
               if (handle_key.types[key] =="number") {
                   $('#maindiv').append('<tr> <th>' + key + ' </th> <th> <input type="' + handle_key.types[key] + '" name ="' +
                       key + '" value="' + value + '"  step="0.001"> </th></tr> ');
               };
               });

           $.each( handle_key.categoricals, function( key, value ) {
                var i;
                var len = handle_key.categoricals[key].length;
                   $('#maindiv').append( '<tr> <th>' + key + ' </th> <th>  <select id="' + key + '" name="' + key + '"> </select>  </th></tr>');
                        for (i = 0; i < len ; i++) {
                            $('#'+key).append(new Option(handle_key.categoricals[key][i], handle_key.categoricals[key][i]));
                        }
               });
    </script>

{% endblock %}

{% block styles %}
    {{ super() }}
    {#    <link rel="stylesheet" href="{{ url_for('.static', filename='jquery.dataTables.css') }}">#}
    {#    <link rel="stylesheet" href="{{ url_for('.static', filename='select.dataTables.css') }}">#}
    <link rel="stylesheet" type="text/css"
          href="https://cdn.datatables.net/v/dt/dt-1.10.16/sl-1.2.5/datatables.min.css"/>
{% endblock %}

{% block app_content %}
    <h1>Prediction</h1>
{#   {{ wtf.quick_form(form, form_type="horizontal", horizontal_columns=('lg', 2, 4)) }}#}
    <form action="/predict" method="post">
        <table>
              <div id="maindiv"> </div>
        </table>
        <hr>
       <h3>{{ target }}</h3>  <h3>{{ prediction }}</h3>
        <button type="submit" formmethod="post" class="btn btn-primary">Predict </button>
    </form>

{% endblock %}

